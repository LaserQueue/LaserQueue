{"version":3,"sources":["libraries.js","_applyConfig.js","_auth.js","_functions.js","_init.js","_objects.js","_socket.js","_tour.js","_variables.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzlDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChgBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"scripts.min.js","sourcesContent":["// libraries\n@@include('../../bower_components/jquery/dist/jquery.min.js')\n@@include('../../bower_components/nprogress/nprogress.js')\n@@include('../../bower_components/tether/dist/js/tether.min.js')\n@@include('../../bower_components/tether-shepherd/dist/js/shepherd.min.js')\n@@include('../../bower_components/bootstrap/dist/js/bootstrap.min.js')\n@@include('../../bower_components/transparency/dist/transparency.min.js')\n@@include('../../bower_components/js-sha256/build/sha256.min.js')\n@@include('../../bower_components/marked/marked.min.js')\n@@include('../../bower_components/draggabilly/dist/draggabilly.pkgd.min.js')\n@@include('../../bower_components/bootbox/bootbox.js')\n@@include('../../bower_components/konami-js/konami.js')\n@@include('./libraries/prism.js')\n","// gets the config file, parses and applies values\n\nvar getConfigFile = $.getJSON('/config.json', function getConfigFileFunction() {\n\t// config.thing returns thing in the config file\n\tconfig = getConfigFile.responseJSON;\n\n\tif(!config.dev_log) {\n\t\t$('[for=log-checkbox]').remove();\n\t} else {\n\t\tconsole.log('Recommended: use the in-page log. Most info goes there.');\n\t}\n\n\tlogText('Begin log');\n\n\t// log entire config file\n\tlogText('Config file follows: {config}'.format({config: JSON.stringify(config, null, 2)}));\n\n\t// set WebSockets hostname and port from config\n\thost = 'ws://{host}:{port}'.format({host: config.host, port: config.port});\n\n\t// set page title\n\tif (config.page_title) {\n\t\t$('title').text(config.page_title);\n\t}\n\n\t// hide task add form if auth is required to add\n\tif (config.authactions.indexOf('add') != -1) {\n\t\t$('.job-form-group').hide();\n\t}\n\n\t// set up form options\n\tformOptions = {\n\t\t\"name\": {\n\t\t\t\"type\": \"string\",\n\t\t\t\"placeholder\": config.name_input,\n\t\t\t\"tooltip\": config.name_hover,\n\t\t\t\"classes\": [\"job-human-name\"]\n\t\t},\n\t\t\"time\": {\n\t\t\t\"type\": \"string\",\n\t\t\t\"placeholder\": config.time_input,\n\t\t\t\"tooltip\": config.time_hover,\n\t\t\t\"classes\": [\"job-time-estimate\"]\n\t\t},\n\t\t\"material\": {\n\t\t\t\"type\": \"select\",\n\t\t\t\"tooltip\": config.material_hover,\n\t\t\t\"header\": config.material_input,\n\t\t\t\"options\": config.materials,\n\t\t\t\"classes\": [\"job-material\"]\n\t\t},\n\t\t\"priority\": {\n\t\t\t\"type\": \"select\",\n\t\t\t\"tooltip\": config.priority_hover,\n\t\t\t\"header\": config.priority_input,\n\t\t\t\"options\": config.priorities,\n\t\t\t\"classes\": [\"job-priority\"]\n\t\t}\n\t};\n\n\t// render the form\n\trenderForm();\n\n\t// set table headers from config\n\t$('.action-header').text(config.action_header);\n\t$('.name-header').text(config.name_header);\n\t$('.material-header').text(config.material_header);\n\t$('.time-header').text(config.time_header);\n\t$('.priority-header').text(config.priority_header);\n\n\t// set up action buttons from config\n\tbuttons = {\n\t\t'remove': '\\n<a role=\"button\" tabindex=\"0\" class=\"fa fa-remove remove-job\" data-toggle=\"tooltip\" data-placement=\"right\" title=\"{title}\"></a>'.format({title: config.remove_hover}),\n\t\t'increment': '\\n<a role=\"button\" tabindex=\"0\" class=\"fa fa-chevron-up increment-job\" data-toggle=\"tooltip\" data-placement=\"right\" title=\"{title}\"></a>'.format({title: config.incr_hover}),\n\t\t'decrement': '\\n<a role=\"button\" tabindex=\"0\" class=\"fa fa-chevron-down decrement-job\" data-toggle=\"tooltip\" data-placement=\"right\" title=\"{title}\"></a>'.format({title: config.decr_hover}),\n\t\t'pass': '\\n<a role=\"button\" tabindex=\"0\" class=\"fa fa-chevron-down lower-priority\" data-toggle=\"tooltip\" data-placement=\"right\" title=\"{title}\"></a>'.format({title: config.pass_hover}),\n\t\t'relmove': '\\n<a role=\"button\" tabindex=\"0\" class=\"fa fa-bars move-job\" data-toggle=\"tooltip\" data-placement=\"right\" title=\"{title}\"></a>'.format({title: config.drag_hover})\n\t};\n\n\t// set up admin mode if enabled\n\tif (config.admin_mode_enabled) {\n\t\t$('.authorize').click(function handleAuthToggle() {\n\t\t\t// if already authorized, deauth\n\t\t\tif (authed) {\n\t\t\t\tsocketSend({'action': 'deauth'});\n\t\t\t\t$('.authorize').tooltip('hide');\n\t\t\t} else {\n\n\t\t\t\t// if not authorized, present auth UI\n\t\t\t\tmodalMessage('Authenticate',\n\t\t\t\t\t'<form class=\"login-form\">' +\n\t\t\t\t\t\t'<div class=\"form-group\">' +\n\t\t\t\t\t\t\t'<label for=\"password\">Password</label>' +\n\t\t\t\t\t\t\t'<input type=\"password\" class=\"form-control coach-password\" id=\"password\" placeholder=\"Password\">' +\n\t\t\t\t\t\t'</div>' +\n\t\t\t\t\t\t'<button type=\"submit\" class=\"btn btn-pink auth-button\">Sign in</button>' +\n\t\t\t\t\t'</form>'\n\t\t\t\t);\n\t\t\t\t$('.authorize').tooltip('hide');\n\n\t\t\t\t// once modal is up, focus password\n\t\t\t\tsetTimeout(function focusPasswordField() {\n\t\t\t\t\t$(\".coach-password\").focus();\n\t\t\t\t}, 500);\n\n\t\t\t\t// authenticate password when asked\n\t\t\t\t$('.auth-button').click(function authenticatePassword(event) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tNProgress.start();\n\t\t\t\t\tif($('#password').val()) {\n\t\t\t\t\t\tlogText('Password entered. Attempting auth.');\n\t\t\t\t\t\tsocketSend({\n\t\t\t\t\t\t\t'action': 'auth',\n\t\t\t\t\t\t\t'pass': sha256($('#password').val())\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\t$('.authorize').attr('data-original-title', config.login);\n\t}\n\n\t// enable Google Analytics if config says so\n\tif(!config.google_analytics_key) {\n\t\tlogText('Google Analytics tracking is not enabled.');\n\t} else {\n\t\tlogText('Google Analytics tracking is enabled with key ' + config.google_analytics_key);\n\n\t\t/* jshint ignore:start */\n\t\t(function GAisogram(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function googleAnalyticsFunction(){\n\t\t(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),\n\t\t\tm=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)\n\t\t})(window,document,'script','//www.google-analytics.com/analytics.js','ga');\n\t\t/* jshint ignore:end */\n\n\t\tgoogleAnalytics('create', config.google_analytics_key, {\n\t\t\t'cookieDomain': 'none'\n\t\t});\n\t\tgoogleAnalytics('send', 'pageview');\n\t}\n\n\t// log status\n\tlogText('LaserQueue {version} is up and config is loaded and parsed. Attempting connection to WebSockets host at {host}.'.format({version: config.version,host: host}));\n\n\t// attempt WebSockets connection\n\tsocketSetup();\n\n\t// maintain connection if dropped\n\tsetInterval(function tryToReconnect() {\n\t\tif(typeof config.reconnectRate != 'undefined' && (typeof socket == 'undefined' || socket.readyState == socket.CLOSED)) {\n\t\t\t// initialize websockets if closed\n\t\t\tlogText('Attempting connection to WebSockets host {host}.'.format({host: host}));\n\t\t\tsocketSetup();\n\t\t}\n\t}, config.reconnectRate);\n\n\tregistry = new Registry();\n\n});\n","// functions for auth\n\nfunction onAuth() {\n\tauthed = true;\n\tlogText('Displaying authed modal.');\n\tmodalMessage('Success!', '<p class=\"lead\">You\\'ve been authorized!</p>');\n\tsetTimeout(function hideModal() {\n\t\t$(\"#notify-modal\").modal(\"hide\");\n\t}, 1000);\n\t$('.jobs-table-template').render(allCuts, renderDirectives);\n\t$('.disabled').prop('disabled', false);\n\t$('.authorize').attr('data-original-title', config.logout);\n\t$('.nuvu-logo').attr('src', '/dist/img/admin-logo.svg');\n\tif (config.authactions.indexOf('add') != -1) {\n\t\t$('.job-form-group').show();\n\t}\n\tpopulateActions();\n\trenderForm();\n\tNProgress.done();\n}\n\nfunction onFailedauth() {\n\tmodalMessage('Failure', '<p class=\"lead\">Unfortunately, it looks like your password was wrong.</p>');\n\tlogText('Password was wrong. You\\'re bad and you should feel bad.');\n\tNProgress.done();\n}\n\nfunction onDeauth() {\n\tauthed = false;\n\tlogText('User has been deauthed.');\n\t$('.jobs-table-template').render(allCuts, renderDirectives);\n\t$('.disabled').prop('disabled', true);\n\t$('.authorize').attr('data-original-title', config.login);\n\t$('.nuvu-logo').attr('src', '/dist/img/logo.svg');\n\tif (config.authactions.indexOf('relmove') != -1) {\n\t\t$(draggable).draggabilly('disable');\n\t}\n\tif (config.authactions.indexOf('add') != -1) {\n\t\t$('.job-form-group').hide();\n\t}\n\tpopulateActions();\n\trenderForm();\n}\n","// utilities and functions etc\n\nString.prototype.format = function formatString() {\n\tvar str = this.toString();\n\tif (!arguments.length)\n\t\treturn str;\n\tvar args = typeof arguments[0];\n\targs = ((\"string\" == args || \"number\" == args) ? arguments : arguments[0]);\n\tfor (var arg in args)\n\t\tstr = str.replace(RegExp(\"\\\\{\" + arg + \"\\\\}\", \"gi\"), args[arg]);\n\treturn str;\n};\n\n\nif (!String.prototype.repeat) {\n\tString.prototype.repeat = function countThrough(count) {\n\t\t'use strict';\n\t\tif (this === null) {\n\t\t\tthrow new TypeError('can\\'t convert {object} to object'.format({object: this}));\n\t\t}\n\t\tvar str = '' + this;\n\t\tcount = +count;\n\t\tif (count != count) {\n\t\t\tcount = 0;\n\t\t}\n\t\tif (count < 0) {\n\t\t\treturn str;\n\t\t}\n\t\tif (count == Infinity) {\n\t\t\tthrow new RangeError('repeat count must be less than infinity');\n\t\t}\n\t\tcount = Math.floor(count);\n\t\tif (str.length === 0 || count === 0) {\n\t\t\treturn '';\n\t\t}\n\t\t// ensuring count is a 31-bit integer allows us to heavily optimize the\n\t\t// main part. But anyway, most current (August 2014) browsers can't handle\n\t\t// strings 1 << 28 chars or longer, so:\n\t\tif (str.length * count >= 1 << 28) {\n\t\t\tthrow new RangeError('repeat count must not overflow maximum string size');\n\t\t}\n\t\tvar rpt = '';\n\t\tfor (;;) {\n\t\t\tif ((count & 1) == 1) {\n\t\t\t\trpt += str;\n\t\t\t}\n\t\t\tcount >>>= 1;\n\t\t\tif (count === 0) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tstr += str;\n\t\t}\n\t\treturn rpt;\n\t};\n}\n\nfunction splatArgs(func, args) {\n\treturn Array.prototype.slice.call(args, func.length);\n}\n\n\nfunction ensureNumberStringLength(number, len) {\n\treturn '0'.repeat(len - String(number).length) + String(number);\n}\n\n// logs text to devlog on page\nfunction logText(text) {\n\tif(config.dev_log) {\n\t\tvar currentTime = new Date();\n\t\tvar currentDay = ensureNumberStringLength(currentTime.getDate(), 2);\n\t\tvar currentMonth = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'][currentTime.getMonth()];\n\t\tvar currentYear = currentTime.getFullYear();\n\t\tvar currentHours = ensureNumberStringLength(currentTime.getHours(), 2);\n\t\tvar currentMinutes = ensureNumberStringLength(currentTime.getMinutes(), 2);\n\t\tvar currentSeconds = ensureNumberStringLength(currentTime.getSeconds(), 2);\n\n\t\tvar timestamp = ' [{dd}/{month}/{yyyy} {hh}:{mm}:{ss}] '.format({\n\t\t\tdd: currentDay, month: currentMonth, yyyy: currentYear,\n\t\t\thh: currentHours, mm: currentMinutes, ss: currentSeconds\n\t\t});\n\n\t\tvar textArray = text.split('\\n');\n\n\t\tfor (var i = textArray.length - 1; i > 0; i--) {\n\t\t\t$('.log-pre').prepend('<span class=\"log-time\">{whitespace}</span>{text}\\n'.format({\n\t\t\t\twhitespace: ' '.repeat(24),\n\t\t\t\ttext: textArray[i]}));\n\t\t}\n\t\t$('.log-pre').prepend('<span class=\"log-time\">{stamp}</span>{text}\\n'.format({\n\t\t\tstamp: timestamp,\n\t\t\ttext: textArray[0]}));\n\t} else {\n\t\twindow.console.log(text);\n\t}\n}\n\n// initialize tooltips\nfunction tooltips() {\n\t$('[data-toggle=\"tooltip\"]').tooltip({trigger: 'hover'});\n}\n\n// repopulate action button UUIDs\nfunction populateActions() {\n\tlogText('Populating actions');\n\n\t$('.jobs-table-template tr').each(function dataToTable(index, el) {\n\t\t$(el).attr('data-uuid', allCuts[index].uuid);\n\t\t$(el).attr('data-pos', index);\n\t\t$(el).unbind('click');\n\t});\n\n\t// reinitialize bootstrap tooltips\n\tif(isTouchDevice() === false) {\n\t\ttooltips();\n\t}\n\n\t$('.action-box a').mousedown(function hideTooltips() {\n\t\t$(this).tooltip('hide');\n\t});\n\n\t// handler to remove a job\n\t$('.remove-job').click(function handleRemove(event) {\n\t\t// remove job based on action button\n\t\tvar uuidToRemove = $(this).parents('[data-uuid]')[0].dataset.uuid;\n\t\tvar removeJob = function removeJob(actionButton) {\n\t\t\tgoogleAnalytics('send', 'event', 'action', 'click', 'remove job');\n\t\t\tlogText('removing item {uuid}'.format({uuid: $($(this).parents()[1]).attr('data-uuid')}));\n\t\t\tsocketSend({\n\t\t\t\t'action': 'remove',\n\t\t\t\t'uuid': uuidToRemove\n\t\t\t});\n\t\t};\n\t\tif(event.altKey) {\n\t\t\tremoveJob(this);\n\t\t} else {\n\t\t\t$(event.target).tooltip('hide');\n\t\t\t$('.remove-job').popover('hide');\n\t\t\t$(event.target).popover({\n\t\t\t\tplacement: 'bottom',\n\t\t\t\thtml: true,\n\t\t\t\tcontent: function confirmModalContents() {\n\t\t\t\t\treturn '<button class=\"btn btn-default btn-secondary btn-lg btn-block cancel-remove\">No</button>' +\n\t\t\t\t\t\t'<button class=\"btn btn-danger btn-lg btn-block confirm-remove\">Yes</button>';\n\t\t\t\t}\n\t\t\t});\n\t\t\t$(event.target).popover('show');\n\t\t\t$('.confirm-remove').focus();\n\t\t\t$('.cancel-remove').click(function cancelRemove(event) {\n\t\t\t\t$('.remove-job').popover('hide');\n\t\t\t});\n\t\t\t$('.confirm-remove').click(function confirmRemove(event) {\n\t\t\t\tremoveJob(this);\n\t\t\t\t$('.remove-job').popover('hide');\n\t\t\t});\n\t\t}\n\t});\n\n\t// handler to lower a job\n\t$('.lower-priority').click(function lowerPriority() {\n\t\tgoogleAnalytics('send', 'event', 'action', 'click', 'pass job');\n\t\tlogText('passing item {uuid}'.format({uuid: $($(this).parents()[1]).attr('data-uuid')}));\n\t\tsocketSend({\n\t\t\t'action': 'pass',\n\t\t\t'uuid': $($(this).parents()[1]).attr('data-uuid')\n\t\t});\n\t});\n\n\t// handler to decrement a job\n\t$('.decrement-job').click(function decrementJob() {\n\t\tgoogleAnalytics('send', 'event', 'action', 'click', 'decrement job');\n\t\tlogText('removing item {uuid}'.format({uuid: $($(this).parents()[1]).attr('data-uuid')}));\n\t\tsocketSend({\n\t\t\t'action': 'decrement',\n\t\t\t'uuid': $($(this).parents()[1]).attr('data-uuid')\n\t\t});\n\t});\n\n\t// handler to increment a job\n\t$('.increment-job').click(function incrementJob() {\n\t\tgoogleAnalytics('send', 'event', 'action', 'click', 'increment job');\n\t\tlogText('passing item {uuid}'.format({uuid: $($(this).parents()[1]).attr('data-uuid')}));\n\t\tsocketSend({\n\t\t\t'action': 'increment',\n\t\t\t'uuid': $($(this).parents()[1]).attr('data-uuid')\n\t\t});\n\t});\n\n\tif (authed || config.authactions.indexOf('relmove') == -1) {\n\t\t$('.jobs-table-template tr').each(function makeRowsDraggable(index, el) {\n\t\t\tdraggable[index] = this;\n\t\t\t$(this).draggabilly({\n\t\t\t\taxis: 'y',\n\t\t\t\tcontainer: $('.jobs-table-template')//,\n\t\t\t\t// grid: [ 37, 37 ]\n\t\t\t});\n\t\t\t$(this).on('dragStart', function handleDragStart() {\n\t\t\t\t$('[data-toggle=\"tooltip\"]').tooltip('hide');\n\t\t\t\t$('.jobs-table-template tr:not(.is-dragging) td:nth-child(1) a.fa').addClass('animate-hide');\n\t\t\t});\n\t\t\t$(this).on('dragEnd', function handleDragEnd(event, pointer) {\n\t\t\t\t$('.jobs-table-template tr:not(.is-dragging) td:nth-child(1) a.fa').removeClass('animate-hide');\n\t\t\t\tsocketSend({\n\t\t\t\t\t'action': 'relmove',\n\t\t\t\t\t'uuid': $(this).attr('data-uuid'),\n\t\t\t\t\t'target_index': parseInt($(this).attr('data-pos')) + parseInt(Math.round($(this).data('draggabilly').position.y / $(this).height()))\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t}\n}\n\n// displays message in a bootstrap modal\nfunction modalMessage(modalTitle, modalBody, dialogOptions) {\n\t// hide all dialogs up\n\tbootbox.hideAll();\n\n\t// the object to pass to bootbox\n\tvar dialogObj = {\n\t\ttitle: modalTitle,\n\t\tmessage: modalBody\n\t};\n\n\t// include all modal options\n\tif (typeof dialogOptions !== 'undefined') {\n\t\tdialogObj = $.extend(dialogObj, dialogOptions);\n\t}\n\n\t// show the dialog with message and title\n\tbootbox.dialog(dialogObj);\n\n\t// insert the hooks we want\n\t$('.bootbox').attr('id', 'notify-modal');\n\t$('.modal-title').addClass('notify-modal-title');\n\t$('.modal-title').attr('id', 'notify-modal-label');\n\t$('.modal-body').addClass('notify-modal-body');\n\n\t// bind clicking background to hiding modal\n\t$('.bootbox').click(function bgClickHideModals(event) {\n\t\tif (event.target.id === 'notify-modal') {\n\t\t\tbootbox.hideAll();\n\t\t}\n\t});\n}\n\n// reset a form with thanks to http://stackoverflow.com/questions/680241/resetting-a-multi-stage-form-with-jquery\nfunction resetForm(form) {\n\tform.find('input:text, input:password, input[type=number], input:file, textarea').val(''); // removed 'select'\n\tform.find('input:radio, input:checkbox').removeAttr('checked').removeAttr('selected');\n\tif($(form).selector == '.new-job-form') {\n\t\tform.find('.selected').prop('selected', true);\n\t}\n}\n\n// sends over websockets if the connection is stable\nfunction socketSend(jdata) {\n\tvar socketState = socket.readyState;\n\tif(socketState == 1) {\n\t\tsocket.send(JSON.stringify(jdata));\n\t} else {\n\t\t// if not sending, log why\n\t\tif(socket.readyState != 1) {\n\t\t\tlogText('socketSend() has been called, but socket.readyState is {state}. The socket is probably not connected yet.'.format({state: socketState}));\n\t\t}\n\t}\n}\n\n// render the job submission form\nfunction renderForm() {\n\tif(formOptions === {}) {\n\t\tlogText('renderForm() called but formOptions is blank. Not rendering.');\n\t} else if(JSON.stringify(formOptions) === JSON.stringify(oldFormOptions)) {\n\t\tlogText('renderForm() called but formOptions match cached old formOptions. Not rendering.');\n\t} else {\n\t\tlogText('rendering form');\n\n\t\t// cache form elements\n\t\t$('.form-group > *:not(.btn-submit)').each(function cacheFormElements() {\n\t\t\tif (formOptions[$(this).data('formEl')]) {\n\t\t\t\tformOptions[$(this).data('formEl')].cachedVal = $(this).val();\n\t\t\t}\n\t\t});\n\n\t\t// clear the form group aside from submit button\n\t\t$('.job-form-group').html('<button type=\"submit\" class=\"btn btn-default btn-pink btn-submit\">Submit</button>');\n\n\t\t// for each form option\n\t\tfor(var i in formOptions) {\n\t\t\tvar classes = '';\n\t\t\tvar el = formOptions[i];\n\n\t\t\t// set classes to all classes in array\n\t\t\tfor(var classI in el.classes) classes += el.classes + ' ';\n\n\t\t\tif(el.type === 'string') {\n\t\t\t\t// if this form option wants a string\n\t\t\t\t$('<input data-form-el-type=\"string\" data-form-el=\"{formEl}\" type=\"text\" placeholder=\"{placeholder}\" class=\"form-control {classes}\" data-toggle=\"tooltip\" data-placement=\"bottom\" title=\"{tooltip}\">'.format({\n\t\t\t\t\tformEl: i,\n\t\t\t\t\tplaceholder: el.placeholder,\n\t\t\t\t\tclasses: classes,\n\t\t\t\t\ttooltip: el.tooltip\n\t\t\t\t})).insertBefore('.btn-submit');\n\t\t\t} else if (el.type === 'select') {\n\t\t\t\t// if this form option wants a dropdown\n\t\t\t\tvar optionsType = Object.prototype.toString.call(el.options); // is el.options an array or an object?\n\n\t\t\t\t// inserts the select at the end of the form\n\t\t\t\t$('<select data-form-el-type=\"string\" data-form-el=\"{formEl}\" name=\"{action}\" id=\"job-{action}\" class=\"form-control {classes}\" data-toggle=\"tooltip\" data-placement=\"bottom\" title=\"{tooltip}\"></select>'.format({\n\t\t\t\t\tformEl: i,\n\t\t\t\t\taction: i,\n\t\t\t\t\tclasses: classes,\n\t\t\t\t\ttooltip: el.tooltip\n\t\t\t\t})).insertBefore('.btn-submit');\n\n\t\t\t\t// add a disabled header if one is set\n\t\t\t\tif(el.header) {\n\t\t\t\t\t$('.' + el.classes[0]).append('<option disabled>{text}</option>'.format({text: el.header}));\n\t\t\t\t}\n\n\n\t\t\t\tif(optionsType === '[object Array]') {\n\t\t\t\t\t// if the options supplied are an array\n\t\t\t\t\tfor(var optionI = el.options.length-1; optionI > -1; optionI--) { // for each option, from last to first\n\t\t\t\t\t\t// put the <option> in the <select>\n\t\t\t\t\t\t$('.' + el.classes[0]).append('<option value=\"{index}\">{text}</option>'.format({\n\t\t\t\t\t\t\tindex: optionI,\n\t\t\t\t\t\t\ttext: config.priorities[optionI]\n\t\t\t\t\t\t}));\n\n\t\t\t\t\t}\n\t\t\t\t} else if(optionsType === '[object Object]') {\n\t\t\t\t\t// if the options supplied are an object\n\t\t\t\t\tfor(var optionJ in el.options) {\n\t\t\t\t\t\t// put the <option> in the <select>\n\t\t\t\t\t\t$('.' + el.classes[0]).append('<option value=\"{index}\">{text}</option>'.format({\n\t\t\t\t\t\t\tindex: optionJ,\n\t\t\t\t\t\t\ttext: config.materials[optionJ]\n\t\t\t\t\t\t}));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (el.type === 'generic') {\n\t\t\t\t$(el.template).insertBefore('.btn-submit')\n\t\t\t\t\t.attr('data-form-el-type', 'generic')\n\t\t\t\t\t.attr('data-form-el', i);\n\t\t\t\tif(el.onRender) el.onRender();\n\t\t\t} else {\n\t\t\t\t// if this form option wants something we don't recognize (yet)\n\t\t\t\tlogText('Unhandled input type: {type}.'.format({type: el.type}));\n\t\t\t}\n\t\t}\n\n\t\t// if there is a default material set\n\t\tif(config.default_material) {\n\t\t\t// select it\n\t\t\t$('.job-material').prop(\n\t\t\t\t'selectedIndex',\n\t\t\t\t$('.job-material').children('[value={material}]'.format({material: config.default_material})).index()\n\t\t\t);\n\t\t}\n\n\t\t// if there is a default priority set\n\t\tif(typeof config.default_priority === 'number') {\n\t\t\t// select it\n\t\t\t$('.job-priority').prop(\n\t\t\t\t'selectedIndex',\n\t\t\t\t$('.job-priority').children('[value={priority}]'.format({priority: config.default_priority})).index()\n\t\t\t);\n\t\t}\n\n\t\t// if not authed, disable privileged-only priorities\n\t\tif(!authed) {\n\t\t\tvar priorityOptions = $('.job-priority').children(':not([disabled])');\n\t\t\tfor(var p = 0; p < priorityOptions.length; p++) {\n\t\t\t\tif($(priorityOptions[p]).val() > config.highest_priority_allowed && !config.priority_allow) {\n\t\t\t\t\t$(priorityOptions[p]).prop('disabled', true);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// refill form based on cached values\n\t\t$('.form-group > *:not(.btn-submit)').each(function refillFormElements() {\n\t\t\tvar formEl = formOptions[$(this).data('formEl')];\n\t\t\ttry {\n\t\t\t\tif (formEl.cachedVal) $(this).val(formEl.cachedVal);\n\t\t\t} catch(e) {}\n\t\t});\n\n\t\t// focus the first form element on not-mobile\n\t\tif(!isTouchDevice()) $('.{formObject}:first'.format({formObject: formOptions.name.classes[0]})).focus();\n\n\t\t// reconfigure tooltips\n\t\ttooltips();\n\n\t\t// set up form submission\n\t\t$('.btn-submit').click(function submitForm(clickAction) {\n\t\t\tclickAction.preventDefault();\n\t\t\tlogText(\"submit button clicked\");\n\t\t\tNProgress.start(); // end when the sending callback is received\n\t\t\tvar job = {\n\t\t\t\t\"action\": \"add\",\n\t\t\t\t\"extras\": {}\n\t\t\t};\n\n\t\t\t// for each direct child of '.form-group' that is not the submit button\n\t\t\t$('.form-group > *:not(.btn-submit)').each(function parseFormElements() {\n\t\t\t\tvar formEl = $(this).data('formEl');\n\n\t\t\t\tif(!formOptions[formEl].noParse) {\n\n\t\t\t\t\tif (formEl === 'name' || formEl === 'material') {\n\t\t\t\t\t\t// if name or material, just send value\n\t\t\t\t\t\tjob[formEl] = $(this).val();\n\t\t\t\t\t} else if (formEl === 'priority') {\n\t\t\t\t\t\t// if priority, send value as number\n\t\t\t\t\t\tjob[formEl] = +$(this).val();\n\t\t\t\t\t} else  if (formEl === 'time'){\n\t\t\t\t\t\t// if time estimate, send value parsed as time and as number\n\t\t\t\t\t\tjob[formEl] = +$('.job-time-estimate').val().match(/\\d*(\\.\\d+)?/)[0];\n\t\t\t\t\t} else if (formEl) {\n\t\t\t\t\t\t// otherwise, toss into extras\n\t\t\t\t\t\tif($(this).data('formElType') === 'generic') {\n\t\t\t\t\t\t\tjob.extras[formEl] = formOptions[formEl].getVal();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tjob.extras[formEl] = $(this).val();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// send job to server and reset form\n\t\t\tsocketSend(job);\n\t\t\tresetForm($('.new-job-form'));\n\n\t\t\t// focus name textbox\n\t\t\t$('.job-human-name').focus();\n\t\t});\n\n\t\t// configure <select>s in form to hide tooltip on click\n\t\t$('.job-form-group select').click(function hideTooltip() {\n\t\t\t$(this).tooltip('hide');\n\t\t});\n\n\t\t// cache current formOptions\n\t\toldFormOptions = $.extend(true, formOptions);\n\t}\n}\n\n// wrapper for socketSend that changes an item's attribute\nfunction changeAttr(taskid, attrKey, attrVal) {\n\tif(typeof taskid == 'string') {\n\t\tsocketSend({\n\t\t\t'action': 'attr',\n\t\t\t'uuid': taskid,\n\t\t\t'key': attrKey,\n\t\t\t'new': attrVal\n\t\t});\n\t} else if(typeof taskid == 'number') {\n\t\tchangeAttr(allCuts[taskid].uuid, attrKey, attrVal);\n\t} else if(typeof taskid == 'object') {\n\t\tchangeAttr($(taskid).attr('data-uuid'), attrKey, attrVal);\n\t} else {\n\t\tlogText('changeAttr() called with invalid taskid type');\n\t}\n}\n\n// read the function name, it says it all\nfunction rickRoll() {\n\tif (config.easter_eggs) {\n\t\tmodalMessage('Never gonna give you up', '<iframe width=\"420\" height=\"315\" src=\"http://www.youtube.com/embed/dQw4w9WgXcQ?autoplay=1&disablekb=1&controls=0&loop=1&showinfo=0&iv_load_policy=3\" frameborder=\"0\" allowfullscreen></iframe>');\n\t\t$('html').addClass('lol');\n\t}\n\telse {\n\t\tlogText('This is a serious establishment, son. I\\'m dissapointed in you.');\n\t}\n}\n\n// and his name is\nfunction johnCena() {\n\tif (config.easter_eggs) {\n\t\tmodalMessage('And his name is', '<iframe width=\"420\" height=\"315\" src=\"https://www.youtube.com/embed/weBnn5fzcHg?autoplay=1&disablekb=1&controls=0&loop=1&showinfo=0&iv_load_policy=3\" frameborder=\"0\" allowfullscreen></iframe>');\n\t}\n\telse {\n\t\tlogText('Too little cena, not enough easter egg.');\n\t}\n}\n\n// checks if the device is a touch device\nfunction isTouchDevice(){\n\treturn true === ('ontouchstart' in window || window.DocumentTouch && document instanceof DocumentTouch);\n}\n\n// ga() if Google Analytics is enabled\nfunction googleAnalytics(i, s, o, g, r, a, m){\n\tif (typeof config.google_analytics_key !== 'string' && config.google_analytics_key !== '') {\n\t\tga(i, s, o, g, r, a, m);\n\t}\n}\n\n// convert time in minutes to pretty time\nfunction prettifyTime(mins) {\n\tvar timetotal = mins;\n\tvar hours = Math.floor(timetotal / 60);\n\ttimetotal -= hours * 60;\n\tvar minutes = Math.floor(timetotal);\n\ttimetotal -= minutes;\n\tvar seconds = +(timetotal * 60).toFixed(2);\n\n\tvar prettyTime = String(hours ? hours + 'h' : '') + (minutes && hours ? ' ' : '');\n\tprettyTime += String(minutes ? minutes + 'm' : '') + (seconds && minutes ? ' ' : '');\n\tprettyTime += String(seconds ? seconds + 's' : '');\n\n\treturn prettyTime;\n}\n","// initialize the things\n\n// holds old and new JSON\n// for comparison to minimize layout thrashing n stuff\nvar oldJsonData = 'uninitialized';\nvar jsonData;\n\n// initialize the modal by changing the title\n$('.notify-modal-title').html('Notification');\n\n// hide nprogress spinner\nNProgress.settings.showSpinner = false;\n\n// footer\n$.ajax({\n\turl: '/infotext.md',\n\ttype: 'GET'\n})\n.done(function writeInfoText(request) {\n\t$('.credits-footer').before(\n\t\tmarked(request)\n\t);\n})\n.fail(function handleInfoTextFail() {\n\tconsole.log('Failed to get infotext.md');\n});\n\n// bind ESC key to hide all dialogs\n$(document).keyup(function hideAllDialogs(e) {\n\tif (e.keyCode == 27) {\n\t\tbootbox.hideAll();\n\t\t$('.remove-job').popover('hide');\n\t\t$('[data-toggle=tooltip]').tooltip('hide');\n\t}\n});\n\n// allow click-hold on log button to download logs so far\nvar logClickTimeout = 0;\n\n$('.log-toggler').mousedown(function maybeDownloadLog(evt) {\n\tif(evt.altKey) {\n\t\tlogClickTimeout = setTimeout(function downloadLog() {\n\t\t\twindow.open('data:application/octet-stream;,' + encodeURI($('.log-pre').text()));\n\t\t}, 1000);\n\t}\n}).bind('mouseup mouseleave', function doNotDownloadLog() {\n\tclearTimeout(logClickTimeout);\n});\n\n// ready the konami\n$(document).ready(function loadKonami() {\n\tvar easterEgg = new Konami();\n\teasterEgg.code = function rickRollUser() {\n\t\trickRoll();\n\t};\n\teasterEgg.load();\n});\n","function Registry() {\n\tthis.events = {};\n}\n\nRegistry.prototype.on = function registerEvent(tag) {\n\tvar args = splatArgs(Registry.prototype.on, arguments);\n\tif (!this.events.hasOwnProperty(tag)) {\n\t\tthis.events[tag] = {};\n\t}\n\tnewjobid = -1;\n\tfor (var jobid in this.events[tag]) {\n\t\tnewjobid = max(jobid, newjobid);\n\t}\n\tnewjobid++;\n\tthis.events[tag][newjobid] = args;\n\treturn newjobid;\n};\n\nRegistry.prototype.deregister = function deregisterEvent(tag, jobid) {\n\tif (this.events.hasOwnProperty(tag)) {\n\t\tif (this.events[tag].hasOwnProperty(jobid)) {\n\t\t\tdelete this.events[tag][jobid];\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n};\n","// basically this handles everything WebSockets\n\nNProgress.start();\n\nfunction parseCut(arrayIndex, arrayEl) {\n\t// parse cut\n\tdisplayEl = $.extend({}, arrayEl); // deepcopy\n\tdisplayEl.material = config.materials[arrayEl.material];\n\tdisplayEl.priority = config.priorities[arrayEl.priority];\n\tdisplayEl.esttime = prettifyTime(arrayEl.esttime);\n\n\t// add to full list of cuts\n\tallCuts = allCuts.concat(displayEl);\n}\n\nfunction socketSetup() {\n\n\t// wait until host has a real value\n\twhile (host === 'undefined') {}\n\tsocket = new WebSocket(host);\n\n\t// when websockets connects\n\tsocket.onopen = function handleSocketOpen() {\n\t\t// print to log and consoles\n\t\tonDeauth();\n\t\tlogText('WebSockets connection opened successfully');\n\n\t\t$('#notify-modal').modal('hide');\n\n\t\tNProgress.done();\n\t};\n\n\t// when websockets message\n\tsocket.onmessage = function handleMessage(msg) {\n\n\t\t// loads JSON data\n\t\tjsonData = JSON.parse(msg.data);\n\n\t\t// if data is new\n\t\tif (JSON.stringify(jsonData) !== JSON.stringify(oldJsonData) && 'action' in jsonData) {\n\n\t\t\t// deep copy jsonData to oldJsonData\n\t\t\toldJsonData = $.extend({}, jsonData);\n\n\t\t\t// log the new data\n\t\t\tlogText('new JSON received: {json}'.format({json: JSON.stringify(jsonData)}));\n\n\t\t\t// if being told to render table\n\t\t\tif (jsonData.action in acceptedAPIs) {\n\t\t\t\tfor (var func in acceptedAPIs[jsonData.action]) {\n\t\t\t\t\tacceptedAPIs[jsonData.action][func](jsonData);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\t// when websockets error\n\tsocket.onerror = function handleWebSocketsError(error) {\n\t\t// go tell a nerd\n\t\tmodalMessage('Error 4', 'Could not connect to socket at {host}. Maybe the backend is not running? This page will try to reconnect every few seconds. <br><br> <button class=\"btn btn-default btn-pink btn-retry\">Retry</button>'.format({host: host}));\n\n\t\t// set up retry button\n\t\t$('.btn-retry').click(function reloadWithRandom() {\n\t\t\twindow.location = \"{origin}?foo={randnum}\".format({\n\t\t\t\torigin: window.location.origin,\n\t\t\t\trandnum: Math.floor(Math.random() * 11000)\n\t\t\t});\n\t\t});\n\t};\n}\n","var tour = new Shepherd.Tour({\n\tdefaults: {\n\t\tclasses: 'shepherd-theme-arrows',\n\t\tshowCancelLink: true\n\t}\n});\n\ntour.addStep('LaserQueue', {\n\ttitle: 'Welcome to LaserQueue',\n\ttext: 'This site keeps track of everything that needs to be lasercut.',\n\tattachTo: 'body center'\n});\n\ntour.addStep('name', {\n\ttitle: 'Adding a new cut',\n\ttext: 'First, enter your name',\n\tattachTo: '.job-human-name bottom',\n\twhen: {\n\t\tshow: function focusEl() {\n\t\t\t$('.job-human-name').focus().tooltip('hide');\n\t\t}\n\t}\n});\n\ntour.addStep('time', {\n\ttitle: 'Adding a new cut',\n\ttext: 'Next, estimate the length of the cut in minutes',\n\tattachTo: '.job-time-estimate bottom',\n\twhen: {\n\t\tshow: function focusEl() {\n\t\t\t$('.job-time-estimate').focus().tooltip('hide');\n\t\t}\n\t}\n});\n\ntour.addStep('material', {\n\ttitle: 'Adding a new cut',\n\ttext: 'What material are you cutting?',\n\tattachTo: '.job-material bottom',\n\twhen: {\n\t\tshow: function focusEl() {\n\t\t\t$('.job-material').focus().tooltip('hide');\n\t\t}\n\t},\n\tadvanceOn: '.job-material change'\n});\n\ntour.addStep('priority', {\n\ttitle: 'Adding a new cut',\n\ttext: 'You can lower your cut\\'s priority. Coaches can also raise it.',\n\tattachTo: '.job-priority bottom',\n\twhen: {\n\t\tshow: function focusEl() {\n\t\t\t$('.job-priority').focus().tooltip('hide');\n\t\t}\n\t},\n\tadvanceOn: '.job-material change'\n});\n\ntour.addStep('submit', {\n\ttitle: 'Submitting your cut',\n\ttext: 'To add your cut to the queue, just hit submit!',\n\tattachTo: '.btn-submit bottom',\n\twhen: {\n\t\tshow: function focusEl() {\n\t\t\t$('.btn-submit').focus().tooltip('hide');\n\t\t}\n\t},\n\tadvanceOn: '.btn-submit click',\n\tbuttons: []\n});\n\ntour.addStep('removal', {\n\ttitle: 'Removing a job',\n\ttext: 'You can click <i class=\"fa fa-remove remove-job\"></i> to remove a job. Don\\'t  try that right now!',\n\tattachTo: '.remove-job right'\n});\n\ntour.addStep('lowering', {\n\ttitle: 'Lowering a job',\n\ttext: 'You can lower your job with <i class=\"fa fa-chevron-down\"></i>',\n\tattachTo: '.lower-priority right'\n});\n\ntour.addStep('conclusion', {\n\ttitle: 'Good luck',\n\ttext: 'If you have any questions, be sure to ask a coach!',\n\tattachTo: 'body center'\n});\n\ntour.on('complete', function bringBackTooltips() {\n\t$('body').removeClass('hide-tooltips');\n});\n\ntour.on('cancel', function bringBackTooltips() {\n\t$('body').removeClass('hide-tooltips');\n});\n\nfunction queueTour() {\n\tif (config.allow_tour) {\n\t\t$('body').addClass('hide-tooltips');\n\t\ttour.start();\n\t} else {\n\t\tlogText(\"The tour isn't enabled.\");\n\t}\n}\n","// declare all globals here\n\nvar config, jsonData, socket, buttons, registry,\n\tauthed = false,\n\tallCuts = [],\n\tdraggable = [],\n\tdisplayEl = {},\n\tformOptions = {},\n\toldFormOptions = {\"renderFormCalled\": false},\n\tacceptedAPIs = {\n\t\t\"display\": [function displayData(data) {\n\t\t\t// reinitialize full list of cuts\n\t\t\tallCuts = [];\n\t\t\t// for each priority in list:\n\t\t\tfor (var priority = data.queue.length; priority >= 0; priority--) {\n\t\t\t\tel = data.queue[priority];\n\t\t\t\t// for each cut in priority, render\n\t\t\t\t$(el).each(parseCut);\n\t\t\t}\n\t\t\t// render allCuts into table\n\t\t\t$('.jobs-table-template').render(allCuts, renderDirectives);\n\t\t\tpopulateActions();\n\t\t}],\n\t\t\"job_added\": [function endLoader() {\n\t\t\tlogText(\"job_added received, so ending job addition loader\");\n\t\t\tNProgress.done();\n\t\t}],\n\t\t\"add_failed\": [function endLoader() {\n\t\t\tlogText(\"job_failed received, so ending job addition loader\");\n\t\t\tNProgress.done();\n\t\t}],\n\t\t\"authed\": [function authUser(data) {\n\t\t\tif (config.admin_mode_enabled && !authed) onAuth();\n\t\t}],\n\t\t\"authfailed\": [function deauthUser(data) {\n\t\t\tif (config.admin_mode_enabled && !authed) onFailedauth();\n\t\t}],\n\t\t\"deauthed\": [function userFailedAuth(data) {\n\t\t\tif(config.admin_mode_enabled && authed) onDeauth();\n\t\t}],\n\t\t\"rickroll\": [function rickRollUser(data) {\n\t\t\tif(config.easter_eggs) rickRoll();\n\t\t}],\n\t\t\"dodoododoooooo\": [function dodoododoooooo(data) {\n\t\t\tif(config.easter_eggs) johnCena();\n\t\t}],\n\t\t\"refresh\": [function refreshPage(data) {\n\t\t\tif(config.allow_force_refresh) window.location.reload();\n\t\t}],\n\t\t\"notification\": [function displayNotification(data) {\n\t\t\tmodalMessage(data.title, data.text);\n\t\t}],\n\t\t\"starttour\": [function tourQueue(data) {\n\t\t\tif(config.allow_tour) queueTour();\n\t\t}]\n\t},\n\trenderDirectives = {\n\t\tpriority: {\n\t\t\thtml: function drawCoachMode(params) {\n\t\t\t\treturn this.priority + (\n\t\t\t\t\tthis.coachmodified ?\n\t\t\t\t\t\t' <span class=\"fa fa-cog coach-modified\" data-toggle=\"tooltip\" data-placement=\"bottom\" title=\"{title}\"></span>'.format({title: config.modified_hover})\n\t\t\t\t\t\t: ''\n\t\t\t\t);\n\t\t\t},\n\t\t},\n\t\tactions: {\n\t\t\thtml: function actionDirectiveHTML(params) {\n\t\t\t\tvar data = '';\n\t\t\t\tfor (var i = 0; i < Object.keys(buttons).length; i++) {\n\t\t\t\t\tvar button = Object.keys(buttons)[i];\n\t\t\t\t\tif (config.authactions.indexOf(button) == -1 || authed) {\n\t\t\t\t\t\tif (button != \"pass\" || !(params.index >= config.pass_depth && config.pass_depth || authed)) {\n\t\t\t\t\t\t\tdata += buttons[button];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn data;\n\t\t\t},\n\t\t}\n\t};\n"],"sourceRoot":"/source/"}