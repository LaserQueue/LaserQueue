function socketSetup(){socket=new WebSocket(host),socket.onopen=function(){logText("WebSockets connection opened successfully \n"),socket.send(JSON.stringify({action:"null"})),setInterval(function(){socket.readyState!=socket.CONNECTING&&socket.send(JSON.stringify({action:"null"}))},refreshRate)},socket.onmessage=function(t){var e=JSON.parse($.parseJSON(t.data));JSON.stringify(e)!=JSON.stringify(oldJsonData)&&(logText("new JSON received: "+JSON.stringify(e)),$("table.cutting-table tbody").html(tableFirstRow),$(e.queue).each(function(t,e){$(e).each(function(e,o){var n="";o.coachmodified&&(n=' <span class="glyphicon glyphicon-cog coach-modified" data-toggle="tooltip" data-placement="bottom" title="Coach-modified"></span>'),$("table.cutting-table tbody").append('\n						<tr>\n							<td class="col-md-1"></td>\n							<td class="col-md-2">'+o.name+'</td>\n							<td class="col-md-2">'+materials[o.material]+'</td>\n							<td class="col-md-1">'+o.esttime+' minutes</td>\n							<td class="col-md-1">'+priorities[t]+n+"</td>\n						</tr>\n					")})}),populateActions()),oldJsonData=e},socket.onerror=function(t){modalMessage("Error 4","Could not connect to socket at "+host+". Maybe the backend is not running? This page will try to reconnect every few seconds. <br><br> <button class='btn btn-default btn-pink btn-retry'>Retry</button>"),$(".btn-retry").click(function(){window.location=window.location.origin+"?foo="+Math.floor(11e3*Math.random())})}}function logText(t){var e=new Date,o=e.getHours(),n=e.getMinutes(),i=e.getSeconds(),a=e.getMilliseconds(),s=10>o?"0":"",l=10>n?"0":"",c=10>i?"0":"",r=10>a?"00":100>a?"0":"";$(".log-pre").prepend("<span class='log-time'> ["+s+o+":"+l+n+":"+c+i+"."+r+a+"]:</span> "+t+"\n")}function populateActions(){$(".cutting-table tr:not(.table-first-row) td:nth-child(1)").each(function(t,e){$(e).html('\n			<i data-index="'+t+'" class="glyphicon glyphicon-remove remove-job" data-toggle="tooltip" data-placement="right" title="Cancel this job"></i>\n			<i data-index="'+t+'" class="glyphicon glyphicon-triangle-bottom lower-priority" data-toggle="tooltip" data-placement="right" title="Move job down"></i>\n		')}),$('[data-toggle="tooltip"]').tooltip(),$(".remove-job").mouseup(function(){logText("removing attribute "+$(this).attr("data-index")),socket.send(JSON.stringify({action:"sremove",args:[+$(this).attr("data-index")]}))}),$(".lower-priority").mouseup(function(){logText("passing attribute "+$(this).attr("data-index")),socket.send(JSON.stringify({action:"spass",args:[+$(this).attr("data-index")]}))})}function modalMessage(t,e){$(".notify-modal-title").html(t),$(".notify-modal-body").html(e),$("#notify-modal").modal()}var host,socket,materials,priorities,refreshRate,reconnectRate,getConfigFile=$.getJSON("/config.json",function(){host=String("ws://"+getConfigFile.responseJSON.host+":"+getConfigFile.responseJSON.port)}),tableFirstRow=$(".cutting-table").html(),materials={w:"Thin Wood",tw:"Thick Wood",c:"Cardboard",a:"Acrylic",p:"Paper",f:"Fabric",o:"Other"},priorities=["Lunch/After NuVu","Low","Normal","Important","Urgent","Absolutely Required"].reverse(),refreshRate=200;window.console.log("This silly browser log is generally not used. Click the console button at the bottom of the page instead! If there are errors here, please raise an issue."),setInterval(function(){("undefined"==typeof socket||socket.readyState==socket.CLOSED)&&(logText("LaserCutter software is up. Attempting connection to WebSockets host",host),socketSetup())},refreshRate);var oldJsonData="uninitialized",jsonData;populateActions(),$(function(){$('[data-toggle="tooltip"]').tooltip()}),$(".notify-modal-title").html("Notification"),$(document).ready(function(){$(".btn-submit").click(function(t){t.preventDefault(),logText("submit button clicked"),socket.send('\n			{\n				"action": "add",\n				"args": [\n				"'+$(".cut-human-name").val()+'", '+$(".priority-dropdown").val()+", "+$(".cut-time-estimate").val()+', "'+$(".cut-material").val()+'"\n				]\n			}\n		')})});
//# sourceMappingURL=./scripts.min.js.map