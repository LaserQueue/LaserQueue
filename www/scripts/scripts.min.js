function logText(t){$(function(){var o=new Date,e=o.getSeconds()<10?"0":"";$(".log").append("<span class='log-time'>"+o.getHours()+":"+o.getMinutes()+" "+e+o.getSeconds()+"s "+o.getMilliseconds()+"ms </span> "+t+"\n")})}function populateActions(){$(".cutting-table tr:not(.table-first-row) td:nth-child(1)").each(function(t,o){$(o).html('\n			<i data-index="'+t+'" class="glyphicon glyphicon-remove remove-job" data-toggle="tooltip" data-placement="right" title="Cancel this job"></i>\n			<i data-index="'+t+'" class="glyphicon glyphicon-triangle-bottom lower-priority" data-toggle="tooltip" data-placement="right" title="Move job down"></i>\n		')}),$('[data-toggle="tooltip"]').tooltip(),$(".remove-job").mouseup(function(){console.log("removing attribute "+$(this).attr("data-index")),socket.send(JSON.stringify({action:"sremove",args:[+$(this).attr("data-index")]}))}),$(".lower-priority").mouseup(function(){console.log("removing attribute "+$(this).attr("data-index")),socket.send(JSON.stringify({action:"spass",args:[+$(this).attr("data-index")]}))})}function modalMessage(t,o){$(".notify-modal-title").html(t),$(".notify-modal-body").html(o),$("#notify-modal").modal()}var host="ws://yrsegal.local:8765",tableFirstRow=$(".cutting-table").html(),materials={w:"Thin Wood",tw:"Thick Wood",c:"Cardboard",a:"Acrylic",p:"Paper",f:"Fabric",o:"Other"},priorities=["Lunch/After NuVu","Low","Normal","Important","Urgent","Absolutely Required"].reverse(),refreshRate=200,configFile=$.getJSON("/config.json",function(t,o){}).fail(function(){modalMessage("Error 3",'Could not find or parse config file. Have you initialized your configuration using start.sh? See <a href="https://github.com/yrsegal/LaserQueue/blob/master/README.md">the README</a> for more info')}),oldJsonData,jsonData;logText("LaserCutter software is up. Attempting connection to WebSockets host",host);var socket=new WebSocket(host);populateActions(),$(function(){$('[data-toggle="tooltip"]').tooltip()}),$(".notify-modal-title").html("Notification"),socket.onopen=function(){window.console.log("Socket has been opened!"),logText(" WebSockets connection opened successfully \n"),socket.send(JSON.stringify({action:"null"})),setInterval(function(){logText("Data refreshed"),socket.send(JSON.stringify({action:"null"}))},refreshRate)},socket.onmessage=function(t){var o=JSON.parse($.parseJSON(t.data));JSON.stringify(o)!=JSON.stringify(oldJsonData)&&(logText("old JSON: "+JSON.stringify(oldJsonData)),logText("new JSON received: "+JSON.stringify(o)),$("table.cutting-table tbody").html(tableFirstRow),$(o.queue).each(function(t,o){$(o).each(function(o,e){var n="";e.coachmodified&&(n=' <span class="glyphicon glyphicon-cog coach-modified" data-toggle="tooltip" data-placement="bottom" title="Coach-modified"></span>'),$("table.cutting-table tbody").append('\n					<tr>\n						<td class="col-md-1"></td>\n						<td class="col-md-2">'+e.name+'</td>\n						<td class="col-md-2">'+materials[e.material]+'</td>\n						<td class="col-md-1">'+e.esttime+' minutes</td>\n						<td class="col-md-1">'+priorities[t]+n+"</td>\n					</tr>\n				")})}),populateActions()),oldJsonData=o},socket.onerror=function(t){modalMessage("Error 4","Could not connect to socket at "+host+". Maybe the backend is not running?")},$(document).ready(function(){$(".btn-submit").click(function(t){t.preventDefault(),logText("submit button clicked"),socket.send('\n			{\n				"action": "add",\n				"args": [\n				"'+$(".cut-human-name").val()+'", '+$(".priority-dropdown").val()+", "+$(".cut-time-estimate").val()+', "'+$(".cut-material").val()+'"\n				]\n			}\n		')})});
//# sourceMappingURL=./scripts.min.js.map